<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Merp Catcher</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: linear-gradient(to top, #1e3c72, #2a5298);
      font-family: sans-serif;
    }
    canvas {
      display: block;
    }
    #score {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 24px;
      font-weight: bold;
      display: none;
    }
    #titleScreen, #gameOverScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top, #000000cc, #000000aa);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      font-size: 36px;
      z-index: 10;
    }
    #startButton, #restartButton {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 24px;
      background: yellow;
      color: black;
      border: none;
      cursor: pointer;
      border-radius: 10px;
    }
    #startButton:hover, #restartButton:hover {
      background: gold;
    }
  </style>
</head>
<body>
<div id="titleScreen">
  <div>Merp Catcher</div>
  <button id="startButton">Start Game</button>
</div>
<div id="gameOverScreen" style="display: none;">
  <div>Game Over</div>
  <button id="restartButton">Restart</button>
</div>
<canvas id="gameCanvas"></canvas>
<div id="score">Score: 0</div>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let score = 0;
let missed = 0;
const scoreDisplay = document.getElementById('score');
const titleScreen = document.getElementById('titleScreen');
const gameOverScreen = document.getElementById('gameOverScreen');
const startButton = document.getElementById('startButton');
const restartButton = document.getElementById('restartButton');

const player = {
  x: canvas.width / 2,
  y: canvas.height - 50,
  width: 80,
  height: 20,
  color: 'white',
  speed: 10
};

const mers = [];
let gameRunning = false;

const merpImage = new Image();
merpImage.src = 'data:image/png;base64,...'; // (truncated for brevity)

merpImage.onload = function() {
  startButton.addEventListener('click', startGame);
  restartButton.addEventListener('click', startGame);
};

function createMerp() {
  const size = 40;
  if (gameRunning) {
    mers.push({
      x: Math.random() * (canvas.width - size),
      y: 0,
      size,
      speed: 3 + Math.random() * 3
    });
  }
}

function drawPlayer() {
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawMers() {
  mers.forEach(mer => {
    ctx.drawImage(merpImage, mer.x, mer.y, mer.size, mer.size);
  });
}

function updateMers() {
  for (let i = mers.length - 1; i >= 0; i--) {
    mers[i].y += mers[i].speed;

    if (mers[i].y + mers[i].size > canvas.height) {
      mers.splice(i, 1);
      missed++;
      if (missed >= 3) {
        endGame();
      }
      continue;
    }

    if (
      mers[i].x + mers[i].size > player.x &&
      mers[i].x < player.x + player.width &&
      mers[i].y + mers[i].size > player.y
    ) {
      mers.splice(i, 1);
      score++;
      scoreDisplay.textContent = 'Score: ' + score;
    }
  }
}

function gameLoop() {
  if (!gameRunning) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlayer();
  drawMers();
  updateMers();
  requestAnimationFrame(gameLoop);
}

function startGame() {
  score = 0;
  missed = 0;
  scoreDisplay.textContent = 'Score: 0';
  titleScreen.style.display = 'none';
  gameOverScreen.style.display = 'none';
  scoreDisplay.style.display = 'block';
  mers.length = 0;
  gameRunning = true;
  setInterval(createMerp, 800);
  gameLoop();
}

function endGame() {
  gameRunning = false;
  scoreDisplay.style.display = 'none';
  gameOverScreen.style.display = 'flex';
}

window.addEventListener('mousemove', (e) => {
  player.x = e.clientX - player.width / 2;
});
</script>
</body>
</html>
